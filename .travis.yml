language: groovy
jdk:
- oraclejdk7
sudo: false
branches:
  only:
  - master
  - dev
before_install:
 - wget -q https://raw.githubusercontent.com/AtlasOfLivingAustralia/travis-build-configuration/master/ala_common.sh
 - chmod +x ala_common.sh
 - source ./ala_common.sh
 - ala_travis_grails_setup_env
 - MAVEN_REPO="ala-repo-snapshot"; grep '^app\.version=' ./application.properties |
   grep -q "\-SNAPSHOT"; if [ "$?" = "1" ]; then MAVEN_REPO="ala-repo-release"; fi;
 - echo "MAVEN_REPO:$MAVEN_REPO"
script:
 - grails clean && grails refresh-dependencies --non-interactive && grails prod maven-deploy --repository=$MAVEN_REPO --non-interactive --stacktrace --verbose
env:
  global:
  - secure: m0bpi0UaM/n+sVA7arpgFhq6Jol5ZkV3kDds4pgbpssyHWlTv4CBbfjkQkV51mljgtMJPdCvP3llNZjPkWOBsQxRSoWc/cWRkTunRTQPfXwOMpV3zRQAZOB76d2DMnJ0oRRBNRHHmDgFvN/ryCj5i2+Hm67eyBANRfGAY4YWAhcRV8qUw77XWM89Vvc/VEVpyK3k19gABCAX4FSDl2l/Qg9KHfO4sYGZyy0AeaGZkKk+n+mwXlxDqjgam29NoEngcv3HoBsvORxU8DjjmIZIw4uQLWYWTidMbtoULzPnvrNwB74XbdLnfhPpkY+cwXb1BBGx5z5YP7Koos9JEZVbmrF9XP9/eU6xCzK9oqU6moG25rWsAnTfxdrZsFw1ZwUzHhmWuPky+vFP0Jq+pu18X0MMUCpgEH0CyIVeEFayGJapxauIhzhHnzInhmBM9oz8Ud4144cRbZUhJKBy80FSEgWYUVOCQjWJ2UN/zJTJnG1wyvZDEiWdt73a1bEJYe7QHGtd4F8WXpr1Eo+jBVGuXF5FaDbQyRVnY2Vqh6Z+LzyH9PGwrHeLTmfFiZFOqsyvw8/H6NQbUboRDWnuXEwuLvj2NI9oix8177QahrJr25rwFzfwMwAln4dgYbgSm3fUWe05mFE8RwQl82qoR6tsqOpijoFy9k1GUIxHSoNcp9E=
  - secure: OGRoWMoukLNLvPjMYMk1bRm8PQ+8scX1yoy3Zhf47/zRweIxdBXxbO5+XLXHuv2dyXQkuiHfTamFVozH5iKI91+hGB1SznbYatHaBd6Gwn7VzuJ8tX0Ucw1MhRnw7q30aLzpPhHTsjPA6003nOAWPJwJEqQbN0/+ZhkCArmsbKq3pRHp2AOxFKsSe8PCyMMkZZT6izJMs6EFfQwemO1uSefSmDOolfBtn941jD6b8ythCd3yGEr8k3VJIe+pq4kB6BIjzBJjPUBJOFO2zgIPCtIPxWJ3toJN2zE94LP8mHPQVS15p/dFtwYt29uCBq97eQdwoMnxgw6YDS+bVYRJWBb9eBL+nXvqxVP6t9LHfMjxpZEoNc0BF+U+GT4qbL9nFCkc8z63dhSDBTELi0Ntqv69KUXuAOCSRZAQzdgDo34mmDvEnXiH5mnr65Qo3LB6EHFlvi73KXOrP0xpGj3vwQzAjH+HSsDWgpPb/UJj3Ia0+H/yoFLEstX9b4K6QD5rJ4WCbptmBK0YVM2DNiT/v5ysC8gVyuzjusLEKIUBlGHfNVH9/OfePh4FalWTktRJE/43m3JBIAwDACa3Bmw6bjRdu4DwAImlRLJDBvetwE6Aobz/J5CaVB+oL06wm9v2Gt34/3t7+oPYU+Kcb8kAqQFWrMaP0nXgBnmPCSKCV5I=
